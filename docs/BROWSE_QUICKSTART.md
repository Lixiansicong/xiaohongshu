# 浏览功能快速上手指南

## 快速开始

### 1. 确保已登录

首先确保你已经登录小红书：

```bash
# 方式 1：使用登录工具
./xiaohongshu-login-darwin-arm64

# 方式 2：使用 MCP 检查登录状态
# 在 Cursor/VSCode 中：
帮我检查小红书登录状态
```

### 2. 启动 MCP 服务

```bash
# 无头模式（推荐生产环境）
./xiaohongshu-mcp-darwin-arm64

# 或有界面模式（方便调试）
./xiaohongshu-mcp-darwin-arm64 -headless=false
```

### 3. 开始浏览

#### 方式一：使用 MCP 工具（推荐）

在 Cursor、VSCode 或其他 MCP 客户端中直接对话：

```
帮我浏览小红书推荐页 5 分钟，点击概率 40%，互动概率 60%
```

#### 方式二：使用 HTTP API

```bash
curl -X POST http://localhost:18060/api/v1/browse/recommendations \
  -H "Content-Type: application/json" \
  -d '{
    "duration": 5,
    "click_probability": 40,
    "interact_probability": 60,
    "comments": ["不错～", "学到了", "感谢分享"]
  }'
```

## 常用配置模板

### 轻度浏览（观察模式）

```json
{
  "duration": 3,
  "click_probability": 20,
  "interact_probability": 30
}
```

适合：
- 新账号预热
- 观察推荐内容
- 低频互动场景

### 中度浏览（日常模式）

```json
{
  "duration": 10,
  "click_probability": 40,
  "interact_probability": 50,
  "comments": [
    "看完感觉收获很多，马上就去试试",
    "这个角度真的很新颖",
    "说得太对了",
    "保存下来慢慢看，感谢分享",
    "这个方法确实挺管用的",
    "原来还可以这样，学到了",
    "照片拍得真好看",
    "有点心动了",
    "这个必须收藏",
    "期待后续更新～"
  ]
}
```

适合：
- 日常账号维护
- 正常用户行为模拟
- 内容发现和互动

### 重度浏览（活跃模式）

```json
{
  "duration": 15,
  "min_scrolls": 5,
  "max_scrolls": 10,
  "click_probability": 60,
  "interact_probability": 70,
  "comments": [
    "看完感觉收获很多，马上就去试试",
    "这个角度真的很新颖，之前完全没想到",
    "哈哈哈笑死我了，太真实了",
    "终于找到同好了！我也一直这么觉得",
    "楼主说得太对了，我昨天刚好遇到这个问题",
    "保存下来慢慢看，感谢分享",
    "这个方法我试过，确实挺管用的",
    "照片拍得真好看，是哪里呀",
    "有点心动，想入手了",
    "原来还可以这样，学到了",
    "说得太到位了，一下子就懂了",
    "这个必须收藏！太实用了",
    "看完就想出去走走了",
    "期待后续更新～",
    "已经关注了，持续追更"
  ]
}
```

适合：
- 活跃账号维护
- 快速提升互动数据
- 内容发现和深度互动

## 在不同客户端中使用

### Cursor

1. 确保 `.cursor/mcp.json` 已配置
2. 在聊天中输入：

```
帮我模拟浏览小红书：
- 浏览 10 分钟
- 点击概率 50%
- 互动概率 70%
- 评论：["太棒了", "学到了", "实用"]
```

### VSCode

1. 确保 `.vscode/mcp.json` 已配置
2. 在 Copilot Chat 中输入：

```
使用 browse_recommendations 工具浏览小红书推荐页 8 分钟
```

### Claude Code CLI

```bash
# 添加 MCP 服务器（首次）
claude mcp add --transport http xiaohongshu-mcp http://localhost:18060/mcp

# 使用工具
claude "帮我浏览小红书推荐页 10 分钟，点击概率 45%，互动概率 65%"
```

### n8n 工作流

在 n8n 中创建 MCP 节点：

```json
{
  "tool": "browse_recommendations",
  "arguments": {
    "duration": 10,
    "click_probability": 40,
    "interact_probability": 60,
    "comments": ["不错", "学到了", "感谢"]
  }
}
```

## 参数详解

| 参数 | 类型 | 默认值 | 说明 | 建议范围 |
|------|------|--------|------|----------|
| duration | int | 10 | 浏览时长（分钟） | 3-30 |
| min_scrolls | int | 3 | 每轮最小滚动次数 | 2-5 |
| max_scrolls | int | 8 | 每轮最大滚动次数 | 5-15 |
| click_probability | int | 30 | 点击笔记概率(%) | 20-70 |
| interact_probability | int | 50 | 互动概率(%) | 30-80 |
| comments | []string | [] | 评论内容列表 | 3-10条 |

## 查看统计结果

浏览完成后会返回详细统计：

```json
{
  "duration": "10m5s",
  "scroll_count": 42,
  "click_count": 15,
  "like_count": 9,
  "favorite_count": 9,
  "comment_count": 6,
  "viewed_notes": ["note_1", "note_2", "..."]
}
```

统计含义：
- **duration**: 实际浏览时长
- **scroll_count**: 总共滚动了多少次
- **click_count**: 点击进入了多少个笔记
- **like_count**: 点赞了多少次
- **favorite_count**: 收藏了多少次
- **comment_count**: 评论了多少次
- **viewed_notes**: 浏览过的笔记 ID 列表

## 最佳实践

### 1. 评论内容建议

✅ 推荐：
- 使用自然、口语化、有情感的评论
- 提供多样化的评论内容（至少 10-20 条）
- 模拟真实用户的思考和反应
- 根据内容类型准备不同风格的评论
- 偶尔加入表情符号增加真实感

**自然评论示例（推荐）**：
```
"看完感觉收获很多，马上就去试试"
"这个角度真的很新颖，之前完全没想到"
"哈哈哈笑死我了，太真实了"
"终于找到同好了！我也一直这么觉得"
"楼主说得太对了，我昨天刚好遇到这个问题"
"保存下来慢慢看，感谢分享"
"这个方法我试过，确实挺管用的"
"照片拍得真好看，是哪里呀"
"有点心动，想入手了"
"原来还可以这样，学到了"
"说得太到位了，一下子就懂了"
"我也遇到过这种情况，不过我是..."
"这个必须收藏！太实用了"
"看完就想出去走走了"
"期待后续更新～"
```

❌ 避免：
- 过于简短机械的评论："好"、"赞"、"666"
- 固定模板化的评论："太棒了！"、"学到了"
- 包含敏感词、广告内容的评论
- 过长的评论（建议 5-25 字之间）
- 完全相同的重复评论

### 2. 概率设置建议

| 场景 | 点击概率 | 互动概率 |
|------|----------|----------|
| 新账号预热 | 15-25% | 20-35% |
| 日常维护 | 30-50% | 40-60% |
| 活跃运营 | 50-70% | 60-80% |

### 3. 时间安排建议

- 单次浏览：5-15 分钟
- 每日频率：2-4 次
- 间隔时间：至少 2 小时
- 总时长控制：每天不超过 1 小时

### 4. 安全建议

✅ 安全做法：
- 使用无头模式运行
- 设置合理的概率值
- 提供多样化的评论
- 控制浏览频率和时长

❌ 风险行为：
- 长时间连续浏览（>30分钟）
- 过高的互动概率（>80%）
- 固定的评论内容
- 高频率执行（<1小时间隔）

## 故障排查

### 问题：浏览没有任何互动

**可能原因**：
- 未登录或登录过期
- 笔记 ID 提取失败
- 网络问题

**解决方法**：
1. 检查登录状态：`帮我检查小红书登录状态`
2. 查看服务日志
3. 降低 headless 模式观察

### 问题：点击笔记失败

**可能原因**：
- 笔记卡片选择器变化
- 页面加载不完整

**解决方法**：
1. 使用非 headless 模式观察
2. 增加等待时间
3. 检查网络连接

### 问题：评论发表失败

**可能原因**：
- 评论内容包含敏感词
- 评论过于频繁
- 账号受限

**解决方法**：
1. 更换评论内容
2. 降低互动概率
3. 增加浏览间隔

## 进阶使用

### 自动化定时浏览

使用 cron 或其他定时任务工具：

```bash
# 每天 9:00、14:00、20:00 浏览
0 9,14,20 * * * curl -X POST http://localhost:18060/api/v1/browse/recommendations \
  -H "Content-Type: application/json" \
  -d '{"duration": 8, "click_probability": 45, "interact_probability": 60}'
```

### 结合其他功能

```
1. 先浏览推荐页发现内容
2. 搜索特定关键词
3. 对感兴趣的笔记深度互动
4. 发布相关内容
```

## 获取帮助

- 详细文档：[完整功能说明](./BROWSE_FEATURE.md)
- 问题反馈：GitHub Issues
- 功能建议：欢迎 PR

## 更新日志

- v2.0.0 (2025-01-15)
  - ✨ 新增模拟浏览功能
  - 🎯 支持随机滚动和点击
  - ❤️ 集成点赞、收藏、评论
  - 📊 提供详细统计数据

